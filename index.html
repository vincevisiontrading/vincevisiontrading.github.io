<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Deriv Auto Trader - Differs Strategy</title>

    <style>

        body { font-family: Arial, sans-serif; margin: 20px; }

        #log { border: 1px solid #ccc; padding: 10px; height: 300px; overflow-y: scroll; }

        button { padding: 10px; margin: 5px; }

        label { display: block; margin-top: 10px; }

    </style>

</head>

<body>

    <h1>Deriv Auto Trader - Differs Only with Consecutive Digit Evasion Strategy</h1>

    <p>This site auto-trades only Digits Differs using a custom strategy based on two consecutive numbers (see logs for details).</p>

    

    <label for="apiToken">API Token:</label>

    <input type="text" id="apiToken" placeholder="Your Deriv API Token" value="1jn9NhwnKT1Gt53">

    

    <label for="appId">App ID:</label>

    <input type="text" id="appId" placeholder="Your Deriv App ID" value="107513">

    

    <label for="symbol">Synthetic Market (Symbol):</label>

    <select id="symbol">

        <option value="R_10">Volatility 10 (R_10)</option>

        <option value="R_25">Volatility 25 (R_25)</option>

        <option value="R_50">Volatility 50 (R_50)</option>

        <option value="R_75">Volatility 75 (R_75)</option>

        <option value="R_100">Volatility 100 (R_100)</option>

        <option value="1HZ500V">Boom 500 (1HZ500V)</option>

        <option value="1HZ1000V">Crash 1000 (1HZ1000V)</option>

        <option value="1HZ10V">Volatility 10 (1s) (1HZ10V)</option>

        <option value="1HZ25V">Volatility 25 (1s) (1HZ25V)</option>

        <option value="1HZ50V">Volatility 50 (1s) (1HZ50V)</option>

        <option value="1HZ75V">Volatility 75 (1s) (1HZ75V)</option>

        <option value="1HZ100V">Volatility 100 (1s) (1HZ100V)</option>

        <!-- Add more symbols as needed from Deriv API docs -->

    </select>

    

    <label for="stake">Stake Amount (per trade):</label>

    <input type="number" id="stake" value="1" min="0.35" step="0.01">

    

    <label for="duration">Duration (ticks, 1-10):</label>

    <input type="number" id="duration" value="5" min="1" max="10">

    

    <button onclick="connectToAPI()">Connect to Deriv API</button>

    <button onclick="startAutoTrading()">Start Auto-Trading</button>

    <button onclick="stopAutoTrading()">Stop Auto-Trading</button>

    

    <h2>Account Balance: <span id="balance">Not connected</span></h2>

    <h2>Trade Log</h2>

    <div id="log"></div>


    <script>

        let ws; // WebSocket connection

        let autoTradeInterval; // Interval for auto-trading

        const logElement = document.getElementById('log');

        const balanceElement = document.getElementById('balance');

        let tickHistory = []; // Last 10 ticks' last digits

        let pendingProposalId = null; // To handle proposal → buy


        // Function to log messages

        function log(message) {

            logElement.innerHTML += `<p>${new Date().toLocaleTimeString()}: ${message}</p>`;

            logElement.scrollTop = logElement.scrollHeight;

        }


        // Connect to Deriv WebSocket API

        function connectToAPI() {

            const apiToken = document.getElementById('apiToken').value;

            const appId = document.getElementById('appId').value;

            const selectedSymbol = document.getElementById('symbol').value;


            if (!apiToken || !appId) {

                log('Error: Please enter API Token and App ID.');

                return;

            }


            ws = new WebSocket('wss://ws.binaryws.com/websockets/v3?app_id=' + appId);


            ws.onopen = () => {

                log('WebSocket connected.');

                // Authorize with API token

                ws.send(JSON.stringify({ authorize: apiToken }));

            };


            ws.onmessage = (event) => {

                const data = JSON.parse(event.data);

                if (data.error) {

                    log('Error: ' + data.error.message);

                } else if (data.authorize) {

                    log('Authorized successfully. Account: ' + data.authorize.loginid);

                    // Subscribe to balance updates

                    ws.send(JSON.stringify({ balance: 1, subscribe: 1 }));

                    // Subscribe to tick stream for the selected symbol

                    log(`Subscribing to ticks for symbol: ${selectedSymbol}`);

                    ws.send(JSON.stringify({ ticks: selectedSymbol, subscribe: 1 }));

                } else if (data.balance) {

                    balanceElement.textContent = `${data.balance.balance} ${data.balance.currency}`;

                } else if (data.tick) {

                    // Collect last digit from tick stream

                    const lastDigit = parseInt(data.tick.quote.toString().slice(-1));

                    tickHistory.push(lastDigit);

                    if (tickHistory.length > 10) tickHistory.shift(); // Keep only last 10

                    log(`New tick on ${data.tick.symbol}: Last digit ${lastDigit}. Recent digits: ${tickHistory.join(', ')}`);

                } else if (data.proposal) {

                    // Received proposal, now buy the contract

                    pendingProposalId = data.proposal.id;

                    ws.send(JSON.stringify({ buy: pendingProposalId, price: data.proposal.ask_price }));

                } else if (data.buy) {

                    log('Trade placed: Contract ID ' + data.buy.contract_id + ' | Buy Price: ' + data.buy.buy_price);

                    // Subscribe to contract updates

                    ws.send(JSON.stringify({ proposal_open_contract: 1, contract_id: data.buy.contract_id, subscribe: 1 }));

                } else if (data.proposal_open_contract) {

                    if (data.proposal_open_contract.is_sold) {

                        log('Contract closed: ' + (data.proposal_open_contract.profit > 0 ? 'Win' : 'Loss') + ' | Profit: ' + data.proposal_open_contract.profit);

                    }

                }

            };


            ws.onclose = () => {

                log('WebSocket disconnected.');

                balanceElement.textContent = 'Disconnected';

            };


            ws.onerror = (error) => {

                log('WebSocket error: ' + error);

            };

        }


        // New Custom Strategy: Consecutive Digit Evasion - Detect two consecutive digits and evade the next in sequence

        function getStrategyDigit() {

            if (tickHistory.length < 2) {

                // Not enough history, default to random

                const randomDigit = Math.floor(Math.random() * 10);

                log(`Insufficient tick history. Defaulting to differ from random digit: ${randomDigit}`);

                return randomDigit;

            }


            // Get the last two digits

            const prevDigit = tickHistory[tickHistory.length - 2];

            const lastDigit = tickHistory[tickHistory.length - 1];


            // Check if they are consecutive (difference of 1, with wrap-around consideration for 0-9, but only exact +1 or -1)

            let predictedDigit;

            if (lastDigit === prevDigit + 1 || lastDigit === prevDigit - 1) {

                // Consecutive detected! Predict the next in sequence

                const direction = lastDigit > prevDigit ? 1 : -1;

                predictedDigit = (lastDigit + direction + 10) % 10; // Modulo 10 for wrap-around (e.g., 9+1=0, 0-1=9)

                log(`Strategy: Detected consecutive pair (${prevDigit}, ${lastDigit}). Predicting next as ${predictedDigit}. Betting differs from it.`);

                return predictedDigit;

            } else {

                // No consecutive pair; fall back to most frequent in last 10

                const freq = {};

                tickHistory.forEach(d => { freq[d] = (freq[d] || 0) + 1; });

                let maxFreq = 0;

                let chosenDigit = 0;

                for (let d = 0; d <= 9; d++) {

                    if (freq[d] > maxFreq) {

                        maxFreq = freq[d];

                        chosenDigit = d;

                    } else if (freq[d] === maxFreq && d > chosenDigit) {

                        chosenDigit = d;

                    }

                }

                log(`Strategy: No consecutive pair in last two (${prevDigit}, ${lastDigit}). Falling back to most frequent digit ${chosenDigit} (freq ${maxFreq}). Betting differs from it.`);

                return chosenDigit;

            }

        }


        // Function to place a Differs trade based on strategy

        function placeTrade() {

            if (!ws || ws.readyState !== WebSocket.OPEN) {

                log('Error: Not connected to API.');

                return;

            }


            const stake = parseFloat(document.getElementById('stake').value);

            const duration = parseInt(document.getElementById('duration').value);

            const selectedSymbol = document.getElementById('symbol').value;

            const evasionDigit = getStrategyDigit(); // From new strategy


            // Check balance

            const currentBalance = parseFloat(balanceElement.textContent.split(' ')[0]);

            if (currentBalance < stake * 1.1) { // Buffer for safety

                log('Error: Insufficient balance for stake.');

                return;

            }


            const tradeParams = {

                proposal: 1,

                amount: stake,

                basis: 'stake',

                contract_type: 'DIGITDIFF', // Only Differs

                currency: 'USD', // Change to your account currency

                duration: duration,

                duration_unit: 't', // ticks

                symbol: selectedSymbol, // Dynamic symbol

                barrier: evasionDigit.toString() // Digit to differ from

            };


            log(`Placing Differs trade on ${selectedSymbol} for digit ${evasionDigit} (${duration} ticks, stake ${stake})...`);

            ws.send(JSON.stringify(tradeParams));

        }


        // Start auto-trading every 60 seconds

        function startAutoTrading() {

            if (autoTradeInterval) {

                log('Auto-trading already running.');

                return;

            }

            placeTrade(); // Initial trade

            autoTradeInterval = setInterval(placeTrade, 60000); // Every 60 seconds (adjust for 1s markets if needed)

            log('Auto-trading started with Consecutive Digit Evasion Strategy on selected symbol.');

        }


        // Stop auto-trading

        function stopAutoTrading() {

            if (autoTradeInterval) {

                clearInterval(autoTradeInterval);

                autoTradeInterval = null;

                log('Auto-trading stopped.');

            }

        }

    </script>

</body>

</html>

